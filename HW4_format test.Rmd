---
title: "HW4-Random Forest Model"
author: "Yuan Yi Chen (Eve)"
date: "2017年6月6日"
output: html_document
---

```{r, include = F}
setwd("C:/Users/Eve/Dropbox/UCLA Files/Courses/418 Tools of Data Science/STATS 418 - HW4")
```

###**E. Models, AUC and ROC(All Features Included)**
####**6. Logistic Regression**

```{r, include = F}
#Remove Objects
rm(list=ls())

#Clear Memory
gc(reset=TRUE)

#diR
setwd("C:/Users/Eve/Dropbox/UCLA Files/Courses/418 Tools of Data Science/STATS 418 - HW4")

#Packages
library(readr)   #Use to read data
library(glmnet)  #Use to apply logistic regression
library(ROCR)    #Use to calcuate AUC
library(h2o)     #Use to run logistic regression and random forest 
library(xgboost) #Use to run random forest model
library(randomForest)
```

```{r, include = F}
library(h2o)
```
```{r, include = F}
h2o.no_progress()
```

```{r, include = F}
h2o.init(nthreads=-1)
```


```{r, include=FALSE}
#Use different data set
dnovalid <- h2o.importFile("test.csv")
dnovalid_split <- h2o.splitFrame(dnovalid, ratios = 0.7, seed = 123)
dnovalid_train <- dnovalid_split[[1]]
dnovalid_test <- dnovalid_split[[2]]
Xnames_novalid <- setdiff(names(dnovalid_train),"y")
```


```{r}
system.time({
  md_logistic <- h2o.glm(x = Xnames_novalid, y = "y", training_frame = dnovalid_train, 
                family = "binomial", 
                alpha = 1, lambda = 0,
                seed = 123,
                nfolds = 5, fold_assignment = "Modulo", keep_cross_validation_predictions = TRUE)
})
```
```{r}
h2o.auc(h2o.performance(md_logistic, dnovalid_test))
```
